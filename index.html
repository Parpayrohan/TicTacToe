<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tic Tac Toe Pro</title>

<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #1e1e1e;
    color: #00ff7f;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  .game {
    text-align: center;
    background: #2c2c2c;
    padding: 30px 40px;
    border-radius: 12px;
    box-shadow: 0 0 20px #00ff7f60;
    position: relative;
  }

  h1 {
    font-size: 3rem;
    color: #00ff7f;
    font-style: italic;
    text-shadow: 0 0 6px #00ff7f;
    margin-bottom: 10px;
  }

  #scoreboard {
    color: #b0ffb0;
    font-size: 1.2rem;
    margin-bottom: 10px;
  }

  #status {
    font-size: 1.2rem;
    margin-bottom: 20px;
    color: #b0ffb0;
  }

  .board {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-template-rows: repeat(3, 100px);
    gap: 8px;
    justify-content: center;
    margin-bottom: 20px;
  }

  .cell {
    background: #1e1e1e;
    border: 2px solid #00ff7f;
    font-size: 2.5rem;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    color: #00ff7f;
    animation: fadeIn 0.4s;
  }

  .cell:hover {
    background: #00ff7f20;
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 0 15px #00ff7f80;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: scale(0.5);}
    to {opacity: 1; transform: scale(1);}
  }

  #restart {
    padding: 10px 20px;
    font-size: 1rem;
    border: 2px solid #00ff7f;
    border-radius: 6px;
    background: #1e1e1e;
    color: #00ff7f;
    cursor: pointer;
    transition: background 0.3s, transform 0.1s;
  }

  #restart:hover {
    background: #00ff7f10;
    transform: scale(1.05);
  }

  /* Popup */
  .popup {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.5);
    background: #2c2c2c;
    border: 3px solid red;
    padding: 20px 50px;
    border-radius: 12px;
    display: none;
    flex-direction: column;
    align-items: center;
    z-index: 10;
    box-shadow: 0 0 20px red;
    width: auto;
    min-width: 400px;
    max-width: 600px;
    opacity: 0;
    transition: transform 0.4s ease, opacity 0.4s ease;
  }

  .popup.show {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }

  .popup h2 {
    color: red;
    font-size: 2rem;
    margin-bottom: 10px;
  }

  .popup #winnerText {
    color: #00ff7f;
    font-size: 1.3rem;
    margin-bottom: 10px;
  }

  .popup p {
    color: #00ff7f;
    font-size: 1.1rem;
    margin: 3px 0;
  }

  .popup button {
    margin-top: 15px;
    padding: 8px 16px;
    border: 2px solid #00ff7f;
    border-radius: 6px;
    background: #1e1e1e;
    color: #00ff7f;
    cursor: pointer;
    transition: background 0.3s, transform 0.1s;
  }

  .popup button:hover {
    background: #00ff7f10;
    transform: scale(1.05);
  }
</style>
</head>
<body>
<main class="game">
  <h1>Tic Tac Toe</h1>
  <div id="scoreboard">Player 1 Wins: 0 | Player 2 Wins: 0</div>
  <div id="status">Player 1's turn</div>

  <div id="board" class="board">
    <div class="cell" data-index="0"></div>
    <div class="cell" data-index="1"></div>
    <div class="cell" data-index="2"></div>
    <div class="cell" data-index="3"></div>
    <div class="cell" data-index="4"></div>
    <div class="cell" data-index="5"></div>
    <div class="cell" data-index="6"></div>
    <div class="cell" data-index="7"></div>
    <div class="cell" data-index="8"></div>
  </div>

  <button id="restart">Restart Game</button>

  <div class="popup" id="gameOverPopup">
    <h2>Game Over</h2>
    <p id="winnerText">Winner: </p>
    <p id="playerXWins">Player 1 Wins: 0</p>
    <p id="playerOWins">Player 2 Wins: 0</p>
    <button id="closePopup">Close</button>
  </div>
</main>

<script>
const cells = document.querySelectorAll('.cell');
const statusText = document.getElementById('status');
const restartBtn = document.getElementById('restart');
const popup = document.getElementById('gameOverPopup');
const closePopupBtn = document.getElementById('closePopup');
const playerXWinsText = document.getElementById('playerXWins');
const playerOWinsText = document.getElementById('playerOWins');
const winnerText = document.getElementById('winnerText');
const scoreboard = document.getElementById('scoreboard');

const playerXName = "Player 1";
const playerOName = "Player 2";

let currentPlayer = 'X';
let gameActive = true;
let board = ["","","","","","","","",""];
let playerXWins = 0;
let playerOWins = 0;

const winPatterns = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function handleClick(e){
  const index = e.target.getAttribute('data-index');
  if(board[index] !== "" || !gameActive) return;

  board[index] = currentPlayer;
  e.target.textContent = currentPlayer;

  const winnerPattern = checkWinner();
  if(winnerPattern){
    gameActive = false;
    highlightWinner(winnerPattern);
    if(currentPlayer === 'X') playerXWins++; else playerOWins++;
    playerXWinsText.textContent = `${playerXName} Wins: ${playerXWins}`;
    playerOWinsText.textContent = `${playerOName} Wins: ${playerOWins}`;
    scoreboard.textContent = `${playerXName} Wins: ${playerXWins} | ${playerOName} Wins: ${playerOWins}`;
    winnerText.textContent = `Winner: ${currentPlayer === 'X' ? playerXName : playerOName}`;
    showPopup();
  } else if(!board.includes("")){
    gameActive = false;
    winnerText.textContent = "Draw!";
    showPopup();
  } else {
    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
    statusText.textContent = `${currentPlayer === 'X' ? playerXName : playerOName}'s turn`;
  }
}

function checkWinner(){
  return winPatterns.find(pattern => {
    const [a,b,c] = pattern;
    return board[a] && board[a] === board[b] && board[a] === board[c];
  }) || null;
}

function highlightWinner(pattern){
  pattern.forEach(index => {
    cells[index].style.boxShadow = "0 0 20px red";
  });
}

function restartGame(){
  currentPlayer = 'X';
  gameActive = true;
  board = ["","","","","","","","",""];
  cells.forEach(cell => {
    cell.textContent = "";
    cell.style.boxShadow = "none";
  });
  statusText.textContent = `${playerXName}'s turn`;
}

function showPopup(){
  popup.style.display = "flex";
  setTimeout(() => popup.classList.add('show'), 10);
}

function closePopup(){
  popup.classList.remove('show');
  setTimeout(() => {
    popup.style.display = "none";
    restartGame();
  }, 400);
}

cells.forEach(cell => cell.addEventListener('click', handleClick));
restartBtn.addEventListener('click', restartGame);
closePopupBtn.addEventListener('click', closePopup);
</script>
</body>
</html>
